# 一、理论

## 1.应用层

### 1.HTTP协议与TCP联系？

1、TPC/IP协议是**传输层协议**，主要解决数据如何在网络中传输，而HTTP是**应用层协议**，主要解决如何包装数据。Http协议是建立在TCP协议基础之上的，，当浏览器需要从服务器获取网页数据的时候，会发出一次Http请求。Http会通过TCP建立起一个到服务器的连接通道，当本次请求需要的数据完毕后，Http会立即将TCP连接断开，这个过程是很短的。所以Http连接是一种短连接，是一种无状态的连接。每次都要建立新的连接。
2、关于TCP/IP和HTTP协议的关系，有一段比较容易理解的介绍：“我们在传输数据时，可以只使用（传输层）TCP/IP协议，但是那样的话，**如果没有应用层，便无法识别数据内容，如果想要使传输的数据有意义，则必须使用到应用层协议**，应用层协议有很多，比如HTTP、FTP、TELNET等，也可以自己定义应用层协议。WEB使用HTTP协议作应用层协议，以封装HTTP 文本信息，然后使用TCP/IP做传输层协议将它发到网络上。”

3、术语TCP/IP代表传输控制协议/网际协议，指的是一系列协议。“IP”代表网际协议，TCP和UDP使用该协议从一个网络传送数据包到另一个网络。把IP想像成一种高速公路，它允许其它协议在上面行驶并找到到其它电脑的出口。TCP和UDP是高速公路上的“卡车”，它们携带的货物就是像HTTP，文件传输协议FTP这样的协议等。 

4、TCP和UDP是FTP，HTTP和SMTP之类使用的传输层协议。虽然TCP和UDP都是用来传输其他协议的，它们却有一个显著的不同：TCP提供有保证的数据传输，而UDP不提供。这意味着TCP有一个特殊的机制来确保数据安全的不出错的从一个端点传到另一个端点，而UDP不提供任何这样的保证。

5、HTTP(超文本传输协议)是利用TCP在两台电脑(通常是Web服务器和客户端)之间传输信息的协议。客户端使用Web浏览器发起HTTP请求给Web服务器，Web服务器发送被请求的信息给客户端。

### 2.http/1.0和http/1.1的区别？

（非持久连接与持久连接、范围请求(断点续传)、缓存处理、更多状态码）

**非持久连接和持久连接**：
		**HTTP 1.0**规定浏览器与服务器只保持短暂的连接，浏览器的每次请求都需要与服务器建立一个TCP连接，服务器完成请求处理后立即断开TCP连接，服务器不跟踪每个客户也不记录过去的请求。
		**HTTP 1.1**则支持持久连接Persistent Connection, 并且默认使用persistent  connection. 在同一个tcp的连接中可以传送多个HTTP请求和响应. 多个请求和响应可以重叠，多个请求和响应可以同时进行. 更加多的请求头和响应头(比如HTTP1.0没有host的字段)。

**HTTP 1.1支持请求的流水线处理：**允许客户端不用等待上一次请求结果放回就可以发出下一次请求，但是服务器端必须要按照接受客户端请求的先后顺序依次送回响应结果，以保证客户端能够区分出每次请求的响应内容，这样也显著的减少了整个下载过程所需要的时间。

**增加host字段**：通过web浏览器的主机头名来明确表示要访问服务器上的那个web站点，这才实现了在一台web服务器上可以在同一个IP地址上使用不同的主机名来创建多个虚拟web站点。

**缓存处理**：HTTP 1.0 中，主要使用 header 头里的 `If-Modified-Since`、`Expires` 来做为缓存判断的标准；HTTP 1.1，则引入了更多的缓存控制策略，如 `Entity tag`，`If-Unmodified-Since`, `If-Match`, `If-None-Match` 等；

**带宽优化及范围请求（断点续传）**：HTTP 1.0 中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象传送了过来，并且不支持断点续传功能；HTTP 1.1 中，则在请求头引入了 range 头域，它允许只请求资源的某个部分，即返回码是 206（Partial Content），这样方便开发者自由的选择，以便于充分利用带宽和连接。如果网络出现中断，服务器只发送了一部分数据，范围请求可以使得客户端只请求服务器未发送的那部分数据，从而避免服务器重新发送所有数据。

**增加了更多（24）的状态响应码**：如409（Conflict）表示请求的资源与资源的当前状态发生冲突；410（Gone）表示服务器上的某个资源被永久性的删除

### 3.http1.1和http2.0的区别？

（二进制分帧层、服务端推送、首部压缩）

**新的二进制格式**（Binary Format）：HTTP1.x的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认0和1的组合。基于这种考虑HTTP2.0的协议解析决定采用二进制格式，实现方便且健壮。

**多路复用**（MultiPlexing），即连接共享：即每一个request都是是用作连接共享机制的。一个request对应一个id，这样一个连接上可以有多个request，每个连接的request可以随机的混杂在一起，接收方可以根据request的 id将request再归属到各自不同的服务端请求里面。做到同一个连接并发处理多个请求。

**header压缩**：如上文中所言，对前面提到过HTTP1.x的header带有大量信息，而且每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。

**服务端推送**（server push）：同SPDY一样，HTTP2.0也具有server push功能。服务端推送能把客户端所需要的资源伴随着index.html一起发送到客户端，省去了客户端重复请求的步骤。正因为没有发起请求，建立连接等操作，所以静态资源通过服务端推送的方式可以极大地提升速度。具体如下：

### 6.http和https的区别，由http升级为https需要做哪些操作？

**区别：**

​	1.HTTPS协议需要到**CA申请证书**，一般免费证书很少，需要交费。
​	2.HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL/TLS之上，SSL/TLS运行在TCP之上，所有传输的内容都经过加密的。
​	3.HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，**前者是80，后者是443**。
​	4.HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题。

**升级操作**：

​	一个域名（你肯定有）
​	Web 服务器（Nginx，Apache，IIS都行）
​	SSL 证书（最好 CA 机构颁发的）